---
title: "Version Information & Unquoted Prompts"
description: "Comprehensive version display, natural language CLI prompts without quotes, stdin support, and improved help UX."
versionNumber: "1.0.3"
date: 2025-12-31
breaking: false
security: false
---

## Added

### Version Information Display
Comprehensive version output with build metadata:

- **Basic version**: `caro --version` shows `caro 1.0.2 (abc1234 2025-01-15)` (scriptable, single-line)
- **Verbose version**: `caro --version --verbose` shows detailed build information with Caro's personality
- **Build type detection**: Distinguishes between dev builds, source installs, and official releases
- **Compile-time metadata capture**: Git commit hash, build date, rustc version, target platform

### Unquoted CLI Prompts
Natural language prompts without quotes (e.g., `caro list files`):

- Maintains 100% backward compatibility with quoted prompts (e.g., `caro "list files"`)
- Supports multi-word prompts: `caro find large files in current directory`
- Shell operators detected and handled correctly: `>`, `|`, `<`, `>>`, `2>`, `&`, `;`

### -p/--prompt Flag
Explicit prompt specification for non-interactive mode:

```bash
caro -p "list files"
```

Highest priority in prompt resolution.

### stdin Input Support
Pipe prompts from other commands:

```bash
echo "list files" | caro
```

Medium priority in prompt resolution (after -p flag).

### Help Display for Empty Input
Shows usage examples instead of error:

- `caro` (no args) displays helpful usage information with exit code 0
- Whitespace-only input also shows help

## Changed

### Argument Parsing
Accepts trailing unquoted words as prompt:

- Uses clap's `trailing_var_arg` feature for flexible argument handling
- Flags must appear before trailing arguments (e.g., `--verbose list files`)

### Input Prioritization
Flag > stdin > trailing arguments:

- -p/--prompt flag takes highest priority
- Piped stdin takes medium priority
- Trailing arguments take lowest priority

### Validation Behavior
Empty/whitespace prompts show help instead of error.

## Technical Details

### Architecture
Library-First design with pure functions:

- `resolve_prompt()`: Priority-based prompt resolution
- `validate_prompt()`: Empty/whitespace validation
- `truncate_at_shell_operator()`: POSIX operator detection

### Performance
Argument parsing overhead < 10ms

### Testing
193 tests passing (12 unit tests for new features, 31 E2E tests)

## Success Criteria Validated

- SC-001: 100% accuracy for 2-5 word prompts
- SC-002: Backward compatibility maintained
- SC-003: Cross-platform tests passing
- SC-004: Help display for empty input
- SC-005: Non-interactive mode with -p flag
- SC-006: Stdin processing works
- SC-007: Shell operator detection 100% accurate
