---
const platforms = [
  {
    name: "macOS",
    icon: "üçé",
    versions: "macOS 12+ (Monterey, Ventura, Sonoma)",
    architectures: ["Apple Silicon (M1/M2/M3)", "Intel x86_64"],
    installation: [
      {
        method: "One-Line Install (Recommended)",
        commands: [
          "bash <(curl --proto '=https' --tlsv1.2 -sSfL https://setup.caro.sh)"
        ]
      },
      {
        method: "Using Cargo",
        commands: [
          "cargo install caro",
          "# Add alias to ~/.zshrc or ~/.bashrc:",
          "alias ai='caro'"
        ]
      },
      {
        method: "Build from Source",
        commands: [
          "git clone https://github.com/wildcard/caro.git",
          "cd caro",
          ". \"$HOME/.cargo/env\"",
          "cargo build --release"
        ]
      }
    ],
    postInstall: [
      "Verify: caro --version (or ai --version if alias set)",
      "Try it: caro \"list files in current directory\"",
      "Configure backends in ~/.config/caro/config.toml (optional)"
    ],
    tips: [
      "MLX backend coming soon for Apple Silicon performance",
      "Use Ollama for local model flexibility",
      "CPU backend works immediately with zero configuration"
    ]
  },
  {
    name: "Linux",
    icon: "üêß",
    versions: "Ubuntu 20.04+, Debian 11+, Fedora 35+, Arch, RHEL 8+",
    architectures: ["x86_64", "ARM64"],
    installation: [
      {
        method: "One-Line Install (Recommended)",
        commands: [
          "bash <(curl --proto '=https' --tlsv1.2 -sSfL https://setup.caro.sh)"
        ]
      },
      {
        method: "Using Cargo",
        commands: [
          "cargo install caro",
          "alias ai='caro'  # Add to ~/.bashrc"
        ]
      },
      {
        method: "Build from Source",
        commands: [
          "git clone https://github.com/wildcard/caro.git",
          "cd caro",
          "cargo build --release"
        ]
      }
    ],
    postInstall: [
      "Verify: caro --version",
      "Try: caro \"show disk usage\"",
      "Optional: Install Ollama for local models"
    ],
    tips: [
      "CPU backend works out of the box",
      "Connect to Ollama or vLLM for more features",
      "Configure backends in ~/.config/caro/config.toml"
    ]
  },
  {
    name: "Windows",
    icon: "ü™ü",
    versions: "Windows 10/11 (WSL2 recommended)",
    architectures: ["x86_64"],
    installation: [
      {
        method: "WSL2 (Recommended)",
        commands: [
          "# In PowerShell (Admin):",
          "wsl --install",
          "# After restart, in WSL Ubuntu:",
          "bash <(curl --proto '=https' --tlsv1.2 -sSfL https://setup.caro.sh)"
        ]
      },
      {
        method: "Using Cargo in WSL",
        commands: [
          "cargo install caro",
          "alias ai='caro'"
        ]
      }
    ],
    postInstall: [
      "Verify: caro --version",
      "Try: caro \"list files\"",
      "Works with POSIX commands in WSL environment"
    ],
    tips: [
      "WSL2 provides full POSIX compatibility",
      "Native Windows support planned for future releases",
      "Use Windows Terminal for best experience"
    ]
  },
  {
    name: "BSD",
    icon: "üòà",
    versions: "FreeBSD 13+, OpenBSD 7+, NetBSD 9+",
    architectures: ["x86_64", "ARM64"],
    installation: [
      {
        method: "Using Cargo",
        commands: [
          "# Install Rust if needed",
          "pkg install rust cargo",
          "cargo install caro"
        ]
      },
      {
        method: "Build from Source",
        commands: [
          "git clone https://github.com/wildcard/caro.git",
          "cd caro",
          "cargo build --release"
        ]
      }
    ],
    postInstall: [
      "Verify: caro --version",
      "Try: caro \"list open ports\"",
      "POSIX compliance ensures BSD compatibility"
    ],
    tips: [
      "CPU backend works reliably on BSD systems",
      "Connect to Ollama or vLLM as needed",
      "Excellent POSIX command compatibility"
    ]
  }
];
---

<section id="platform-guides">
  <div class="container">
    <h2>Installation Guides</h2>
    <p class="section-subtitle">Get Caro running on your preferred platform with step-by-step instructions</p>

    <div class="platforms">
      {platforms.map((platform) => (
        <div class="platform-card">
          <div class="platform-header">
            <span class="platform-icon">{platform.icon}</span>
            <div class="header-info">
              <h3>{platform.name}</h3>
              <p class="versions">{platform.versions}</p>
              <div class="architectures">
                {platform.architectures.map((arch) => (
                  <span class="arch-tag">{arch}</span>
                ))}
              </div>
            </div>
          </div>

          <div class="installation-methods">
            <h4>Installation</h4>
            {platform.installation.map((method) => (
              <div class="method">
                <h5>{method.method}</h5>
                <div class="commands">
                  {method.commands.map((cmd) => (
                    <div class="command-line">
                      <code>{cmd}</code>
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </div>

          <div class="post-install">
            <h4>Post-Installation</h4>
            <ol>
              {platform.postInstall.map((step) => (
                <li>{step}</li>
              ))}
            </ol>
          </div>

          <div class="platform-tips">
            <h4>Platform-Specific Tips</h4>
            <ul>
              {platform.tips.map((tip) => (
                <li>{tip}</li>
              ))}
            </ul>
          </div>
        </div>
      ))}
    </div>

    <div class="universal-note">
      <h3>Universal Configuration</h3>
      <p>Once installed, Caro's configuration is consistent across all platforms:</p>
      <div class="config-example">
        <code>caro config set backend [mlx|ollama|vllm|embedded]</code>
        <code>caro config set safety.level [strict|moderate|permissive]</code>
        <code>caro config show</code>
      </div>
    </div>
  </div>
</section>

<style>
  .platforms {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
    gap: 30px;
    margin-top: 50px;
  }

  .platform-card {
    background: var(--color-bg-secondary);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    padding: 30px;
    transition: transform 0.3s, box-shadow 0.3s, background 0.3s ease, border-color 0.3s ease;
  }

  .platform-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px rgba(255, 140, 66, 0.15);
    border-color: #ff8c42;
  }

  :global(.dark) .platform-card:hover {
    box-shadow: 0 10px 30px rgba(255, 140, 66, 0.25);
  }

  .platform-header {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--color-border);
  }

  .platform-icon {
    font-size: 56px;
  }

  .header-info {
    flex: 1;
  }

  .platform-card h3 {
    font-size: 26px;
    color: var(--color-text);
    margin: 0 0 8px 0;
    transition: color 0.3s ease;
  }

  .versions {
    font-size: 13px;
    color: var(--color-text-secondary);
    margin: 0 0 10px 0;
    transition: color 0.3s ease;
  }

  .architectures {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .arch-tag {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--color-text-tertiary);
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .installation-methods,
  .post-install,
  .platform-tips {
    margin-bottom: 25px;
  }

  .installation-methods h4,
  .post-install h4,
  .platform-tips h4 {
    font-size: 17px;
    color: var(--color-text);
    margin-bottom: 15px;
    transition: color 0.3s ease;
  }

  .method {
    margin-bottom: 20px;
  }

  .method:last-child {
    margin-bottom: 0;
  }

  .method h5 {
    font-size: 15px;
    color: #ff8c42;
    margin-bottom: 10px;
    font-weight: 600;
  }

  .commands {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 15px;
    transition: background 0.3s ease, border-color 0.3s ease;
  }

  .command-line {
    margin-bottom: 8px;
  }

  .command-line:last-child {
    margin-bottom: 0;
  }

  .command-line code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 13px;
    color: var(--color-text);
    line-height: 1.6;
    display: block;
    transition: color 0.3s ease;
  }

  .post-install ol {
    margin: 0;
    padding-left: 20px;
  }

  .post-install li {
    padding: 8px 0;
    color: var(--color-text-tertiary);
    font-size: 14px;
    line-height: 1.6;
    transition: color 0.3s ease;
  }

  .post-install li code {
    background: var(--color-bg);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 13px;
    transition: background 0.3s ease;
  }

  .platform-tips ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .platform-tips li {
    padding: 8px 0 8px 24px;
    color: var(--color-text-tertiary);
    font-size: 14px;
    position: relative;
    line-height: 1.6;
    transition: color 0.3s ease;
  }

  .platform-tips li::before {
    content: "üí°";
    position: absolute;
    left: 0;
    font-size: 16px;
  }

  .universal-note {
    background: linear-gradient(135deg, rgba(255, 140, 66, 0.08) 0%, rgba(255, 107, 53, 0.08) 100%);
    border: 2px solid rgba(255, 140, 66, 0.3);
    border-radius: 12px;
    padding: 30px;
    margin-top: 50px;
  }

  .universal-note h3 {
    font-size: 22px;
    color: var(--color-text);
    margin-bottom: 15px;
    transition: color 0.3s ease;
  }

  .universal-note p {
    color: var(--color-text-secondary);
    font-size: 15px;
    margin-bottom: 15px;
    transition: color 0.3s ease;
  }

  .config-example {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    transition: background 0.3s ease, border-color 0.3s ease;
  }

  .config-example code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 14px;
    color: var(--color-text);
    transition: color 0.3s ease;
  }

  @media (max-width: 1000px) {
    .platforms {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 500px) {
    .platform-header {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
  }
</style>
