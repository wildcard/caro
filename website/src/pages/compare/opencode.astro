---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import Footer from '../../components/Footer.astro';

const comparison = {
  competitor: {
    name: 'OpenCode',
    icon: 'üíª',
  },
  tldr: {
    title: 'TL;DR',
    points: [
      'Both are open source and support local-first operation',
      'OpenCode is a general-purpose AI coding agent; Caro is a specialized shell companion',
      'Caro has 52+ rule-based safety patterns; OpenCode relies on model discretion',
      'OpenCode does file editing, refactoring, etc.; Caro focuses on shell commands only',
      'Both support multiple model backends (Ollama, etc.)'
    ]
  },
  headToHead: [
    { feature: 'Open source', caro: true, competitor: true, winner: 'tie' },
    { feature: 'Works offline', caro: true, competitor: 'partial', winner: 'caro' },
    { feature: 'Zero telemetry', caro: true, competitor: true, winner: 'tie' },
    { feature: 'Rule-based safety checks', caro: true, competitor: false, winner: 'caro' },
    { feature: 'Blocks dangerous commands', caro: true, competitor: false, winner: 'caro' },
    { feature: 'Multi-backend support', caro: true, competitor: true, winner: 'tie' },
    { feature: 'Shell command specialist', caro: true, competitor: false, winner: 'caro' },
    { feature: 'General code editing', caro: false, competitor: true, winner: 'competitor' },
    { feature: 'File refactoring', caro: false, competitor: true, winner: 'competitor' },
  ],
  sections: [
    {
      title: 'Scope & Focus',
      icon: 'üéØ',
      content: `
        <p><strong>OpenCode</strong> is a general-purpose AI coding agent. It can edit files, refactor code, explain codebases, and run terminal commands. It's designed to be a comprehensive coding assistant.</p>
        <p><strong>Caro</strong> intentionally does one thing well: helping you remember and safely execute shell commands. It's a specialized sub-agent, not a full coding assistant. This focus allows for deeper expertise in shell workflows and stronger safety guarantees.</p>
      `
    },
    {
      title: 'Safety Philosophy',
      icon: 'üõ°Ô∏è',
      content: `
        <p><strong>OpenCode</strong> generates commands without systematic pre-execution validation. While you can review commands before running them, there's no dedicated layer that catches dangerous patterns.</p>
        <p><strong>Caro</strong> validates every command against 52+ predefined safety patterns. Commands like <code>rm -rf /</code>, fork bombs, and system-breaking operations are blocked before they're ever shown to you. Safety isn't optional‚Äîit's built into the core.</p>
      `
    },
    {
      title: 'Complementary Use',
      icon: 'ü§ù',
      content: `
        <p>These tools can work together! Use <strong>OpenCode</strong> for general coding tasks‚Äîediting files, explaining code, refactoring. When you need shell command help with safety guarantees, reach for <strong>Caro</strong>.</p>
        <p>Caro is designed to be a focused companion, not a replacement for broader tools. Its lightweight, specialized nature makes it easy to add to any workflow without overlap.</p>
      `
    },
    {
      title: 'Local Operation',
      icon: 'üì°',
      content: `
        <p><strong>OpenCode</strong> supports local operation with various model backends, though some configurations may require internet for model downloads or API calls.</p>
        <p><strong>Caro</strong> is designed offline-first from the ground up. Once you have local models configured, it never needs internet. Perfect for air-gapped environments, flights, or restrictive networks.</p>
      `
    },
  ],
  verdict: {
    chooseCaro: [
      'You need specialized shell command assistance',
      'Rule-based safety validation is important to you',
      'You want a lightweight, focused tool',
      'Air-gapped / offline-first is a requirement',
      'You\'re adding to (not replacing) your existing tools',
    ],
    chooseCompetitor: [
      'You need a general-purpose AI coding agent',
      'File editing and refactoring are primary use cases',
      'You want one tool for multiple coding tasks',
      'Broader codebase understanding is needed',
    ]
  }
};

function renderValue(value: boolean | string) {
  if (value === true) return { icon: '‚úì', class: 'yes' };
  if (value === false) return { icon: '‚úó', class: 'no' };
  return { icon: '‚óê', class: 'partial' };
}
---

<Layout
  title="Caro vs OpenCode - Feature Comparison | Shell AI Tools"
  description="Compare Caro and OpenCode. Specialized shell companion with safety guardrails vs general-purpose AI coding agent."
>
  <Navigation />

  <main class="vs-page">
    <section class="hero">
      <div class="container">
        <div class="vs-header">
          <div class="product product-caro">
            <span class="product-icon">üêï</span>
            <span class="product-name">Caro</span>
          </div>
          <span class="vs-badge">VS</span>
          <div class="product product-competitor">
            <span class="product-icon">{comparison.competitor.icon}</span>
            <span class="product-name">{comparison.competitor.name}</span>
          </div>
        </div>
        <h1>Caro vs {comparison.competitor.name}</h1>
        <p class="hero-subtitle">Specialized shell companion vs general coding agent</p>
      </div>
    </section>

    <section class="tldr">
      <div class="container">
        <h2>{comparison.tldr.title}</h2>
        <ul class="tldr-list">
          {comparison.tldr.points.map((point) => (
            <li>{point}</li>
          ))}
        </ul>
      </div>
    </section>

    <section class="head-to-head">
      <div class="container">
        <h2>Feature Comparison</h2>
        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th class="feature-col">Feature</th>
                <th class="tool-col highlight">Caro</th>
                <th class="tool-col">{comparison.competitor.name}</th>
              </tr>
            </thead>
            <tbody>
              {comparison.headToHead.map((row) => (
                <tr>
                  <td class="feature-name">{row.feature}</td>
                  <td class={`value ${renderValue(row.caro).class} ${row.winner === 'caro' ? 'winner' : ''}`}>
                    <span class="value-icon">{renderValue(row.caro).icon}</span>
                  </td>
                  <td class={`value ${renderValue(row.competitor).class} ${row.winner === 'competitor' ? 'winner' : ''}`}>
                    <span class="value-icon">{renderValue(row.competitor).icon}</span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="details">
      <div class="container">
        {comparison.sections.map((section) => (
          <div class="detail-section">
            <h3><span class="section-icon">{section.icon}</span> {section.title}</h3>
            <div class="section-content" set:html={section.content} />
          </div>
        ))}
      </div>
    </section>

    <section class="verdict">
      <div class="container">
        <h2>Which Should You Choose?</h2>
        <p class="verdict-subtitle">Or use both‚Äîthey complement each other well!</p>
        <div class="verdict-grid">
          <div class="verdict-card caro">
            <h3>Choose Caro if...</h3>
            <ul>
              {comparison.verdict.chooseCaro.map((point) => (
                <li><span class="check">‚úì</span> {point}</li>
              ))}
            </ul>
            <a href="/#download" class="verdict-cta primary">Get Started with Caro</a>
          </div>
          <div class="verdict-card competitor">
            <h3>Choose {comparison.competitor.name} if...</h3>
            <ul>
              {comparison.verdict.chooseCompetitor.map((point) => (
                <li><span class="bullet">‚Ä¢</span> {point}</li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="final-cta">
      <div class="container">
        <h2>Specialized. Safe. Focused.</h2>
        <p>Add Caro to your toolkit for shell command expertise with guardrails.</p>
        <div class="cta-buttons">
          <a href="/#download" class="cta-button primary">Download Caro</a>
          <a href="/compare" class="cta-button secondary">See All Comparisons</a>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .vs-page { background: var(--color-bg); }
  .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }

  .hero { padding: 80px 20px 60px; text-align: center; background: linear-gradient(180deg, var(--color-bg-tertiary) 0%, var(--color-bg) 100%); }
  .vs-header { display: flex; align-items: center; justify-content: center; gap: 30px; margin-bottom: 30px; }
  .product { display: flex; flex-direction: column; align-items: center; gap: 8px; }
  .product-icon { font-size: 48px; }
  .product-name { font-size: 18px; font-weight: 600; color: var(--color-text); }
  .product-caro .product-name { color: #ff8c42; }
  .vs-badge { font-size: 24px; font-weight: 700; color: var(--color-text-secondary); background: var(--color-bg-secondary); padding: 12px 20px; border-radius: 12px; }
  .hero h1 { font-size: 36px; font-weight: 700; margin-bottom: 12px; color: var(--color-text); }
  .hero-subtitle { font-size: 18px; color: var(--color-text-secondary); }

  .tldr { padding: 50px 20px; background: var(--color-bg-secondary); }
  .tldr h2 { font-size: 24px; margin-bottom: 20px; color: var(--color-text); }
  .tldr-list { list-style: none; padding: 0; margin: 0; }
  .tldr-list li { padding: 12px 0; padding-left: 28px; position: relative; color: var(--color-text); border-bottom: 1px solid var(--color-border); }
  .tldr-list li:last-child { border-bottom: none; }
  .tldr-list li::before { content: '‚Üí'; position: absolute; left: 0; color: #ff8c42; font-weight: bold; }

  .head-to-head { padding: 60px 20px; }
  .head-to-head h2 { font-size: 28px; text-align: center; margin-bottom: 30px; color: var(--color-text); }
  .table-wrapper { overflow-x: auto; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-bg); }
  .comparison-table { width: 100%; border-collapse: collapse; }
  .comparison-table th, .comparison-table td { padding: 16px 20px; text-align: center; border-bottom: 1px solid var(--color-border); }
  .comparison-table th { background: var(--color-bg-tertiary); font-weight: 600; color: var(--color-text); }
  .comparison-table th.highlight { background: linear-gradient(135deg, rgba(255, 140, 66, 0.15) 0%, rgba(255, 140, 66, 0.05) 100%); color: #ff8c42; }
  .feature-col { text-align: left !important; min-width: 200px; }
  .tool-col { min-width: 140px; }
  .feature-name { text-align: left !important; color: var(--color-text); }
  .comparison-table tbody tr:last-child td { border-bottom: none; }
  .comparison-table tbody tr:hover { background: var(--color-bg-tertiary); }
  .value { font-size: 20px; }
  .value-icon { font-weight: 600; }
  .value.yes .value-icon { color: #22c55e; }
  .value.no .value-icon { color: #ef4444; }
  .value.partial .value-icon { color: #f59e0b; }
  .value.winner { background: rgba(34, 197, 94, 0.1); }

  .details { padding: 60px 20px; background: var(--color-bg-secondary); }
  .detail-section { margin-bottom: 40px; padding: 30px; background: var(--color-bg); border-radius: 12px; border: 1px solid var(--color-border); }
  .detail-section:last-child { margin-bottom: 0; }
  .detail-section h3 { font-size: 20px; margin-bottom: 16px; color: var(--color-text); display: flex; align-items: center; gap: 10px; }
  .section-icon { font-size: 24px; }
  .section-content { color: var(--color-text-secondary); line-height: 1.7; }
  .section-content :global(p) { margin-bottom: 16px; }
  .section-content :global(p:last-child) { margin-bottom: 0; }
  .section-content :global(strong) { color: var(--color-text); }
  .section-content :global(code) { background: var(--color-bg-secondary); padding: 2px 6px; border-radius: 4px; font-size: 14px; }

  .verdict { padding: 60px 20px; }
  .verdict h2 { font-size: 28px; text-align: center; margin-bottom: 8px; color: var(--color-text); }
  .verdict-subtitle { text-align: center; color: var(--color-text-secondary); margin-bottom: 40px; }
  .verdict-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
  .verdict-card { padding: 30px; border-radius: 12px; border: 1px solid var(--color-border); }
  .verdict-card.caro { background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 140, 66, 0.02) 100%); border-color: rgba(255, 140, 66, 0.3); }
  .verdict-card.competitor { background: var(--color-bg-secondary); }
  .verdict-card h3 { font-size: 20px; margin-bottom: 20px; color: var(--color-text); }
  .verdict-card ul { list-style: none; padding: 0; margin: 0 0 24px 0; }
  .verdict-card li { padding: 10px 0; color: var(--color-text-secondary); display: flex; gap: 10px; }
  .check { color: #22c55e; font-weight: bold; }
  .bullet { color: var(--color-text-secondary); }
  .verdict-cta { display: inline-block; padding: 14px 28px; background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.2s; }
  .verdict-cta:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255, 140, 66, 0.3); }

  .final-cta { padding: 80px 20px; text-align: center; background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%); color: white; }
  .final-cta h2 { font-size: 32px; margin-bottom: 12px; color: white; }
  .final-cta p { font-size: 18px; opacity: 0.9; margin-bottom: 30px; }
  .cta-buttons { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
  .cta-button { display: inline-block; padding: 16px 32px; border-radius: 8px; font-weight: 600; font-size: 16px; text-decoration: none; transition: all 0.2s; }
  .cta-button.primary { background: white; color: #ff6b35; }
  .cta-button.primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); }
  .cta-button.secondary { background: transparent; color: white; border: 2px solid white; }
  .cta-button.secondary:hover { background: rgba(255, 255, 255, 0.1); }

  @media (max-width: 768px) {
    .vs-header { flex-direction: column; gap: 20px; }
    .hero h1 { font-size: 28px; }
    .verdict-grid { grid-template-columns: 1fr; }
    .cta-buttons { flex-direction: column; align-items: center; }
    .cta-button { width: 100%; max-width: 280px; }
  }
</style>
