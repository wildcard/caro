---
import StoryLayout from '../../../layouts/StoryLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const stories = await getCollection('stories');
  return stories.map(story => ({
    params: { slug: story.slug },
    props: { story }
  }));
}

const { story } = Astro.props;
const { Content } = await story.render();
---

<StoryLayout
  title={story.data.title}
  subtitle={story.data.subtitle}
  category={story.data.category}
  era={story.data.era}
  publishedAt={story.data.publishedAt}
  readingTime={story.data.readingTime}
  author={story.data.author}
  sources={story.data.sources}
  tags={story.data.tags}
>
  <Content />
</StoryLayout>
