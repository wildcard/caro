---
import Layout from '../layouts/Layout.astro';

// Roadmap data
const milestones = [
  {
    version: "v1.1.0",
    title: "Core Improvements",
    dueDate: "February 15, 2026",
    daysRemaining: 48,
    progress: 0,
    totalItems: 15,
    completedItems: 0,
    focus: "Production-ready core functionality",
    icon: "üéØ",
    color: "#22c55e",
    deliverables: [
      { category: "Critical", items: ["Fix error blocking release (#150)"] },
      { category: "High Priority", items: ["Hugging Face model download (#10)", "Performance analysis & optimization (#132)", "Build LLM evaluation harness (#135)"] },
      { category: "Infrastructure", items: ["Benchmark suite (#9)", "Property-based tests (#8)", "Automated GitHub releases (#157)"] },
      { category: "Enhancements", items: ["Development practices (#145)", "Interface architecture (#146)", "Machine resource assessment (#147)", "Local directory context (#152)"] }
    ],
    successCriteria: [
      "All critical bugs resolved",
      "Performance benchmarks established",
      "Stable HF model download working",
      "Comprehensive test coverage"
    ]
  },
  {
    version: "v1.2.0",
    title: "Website & Documentation",
    dueDate: "March 31, 2026",
    daysRemaining: 93,
    progress: 0,
    totalItems: 24,
    completedItems: 0,
    focus: "Public launch, marketing, and documentation",
    icon: "üåê",
    color: "#3b82f6",
    deliverables: [
      { category: "Website", items: ["Interactive terminal landing page (#130)", "Website value proposition (#138)", "SEO & social meta tags (#156)", "ASCII art morphs (#151)"] },
      { category: "Documentation", items: ["Docs site with Astro Starlight (#139)", "Comprehensive manual (#158)", "LLM architecture docs (#148)", "Open source guide (#149)"] },
      { category: "Marketing", items: ["12-month strategic roadmap (#134)", "Launch strategy analysis (#136)", "Content pipeline for UGC (#137)", "Multi-channel announcement (#143)"] },
      { category: "Community", items: ["Project mission & values (#144)", "Attribution & credits page (#142)", "Simplified Chinese translation (#159)"] }
    ],
    successCriteria: [
      "Professional website live at caro.sh",
      "Comprehensive documentation available",
      "Marketing materials ready for launch",
      "Community engagement channels established"
    ]
  },
  {
    version: "v2.0.0",
    title: "Advanced Features",
    dueDate: "June 30, 2026",
    daysRemaining: 184,
    progress: 9,
    totalItems: 21,
    completedItems: 1,
    focus: "Innovation and advanced capabilities",
    icon: "üöÄ",
    color: "#a855f7",
    deliverables: [
      { category: "Distributed Intelligence", items: ["Karo distributed terminal system (#133)", "Jazz integration for cross-device sync (#154)"] },
      { category: "Safety & Rules", items: ["Dogma rule engine architecture (#126)", "Security hardening features (#6)"] },
      { category: "AI Enhancements", items: ["Voice synthesis for Caro (#160)", "Exo cluster connection (#162)", "Yappus-Term features (#153)"] },
      { category: "Code Quality", items: ["JSON Schema for TOML config (#11)", "Rustdoc examples (#7)", "FromStr traits (#5)"] }
    ],
    successCriteria: [
      "Karo distributed intelligence prototype working",
      "Voice synthesis integration functional",
      "Advanced safety rules operational",
      "Platform for future innovation established"
    ]
  }
];

const strategicThemes = [
  { quarter: "Q1 2026", theme: "Foundation", description: "Establish production-ready core, optimize performance, build reliable infrastructure", icon: "üèóÔ∏è", color: "#22c55e" },
  { quarter: "Q2 2026", theme: "Launch", description: "Public website launch, comprehensive documentation, marketing and community building", icon: "üöÄ", color: "#3b82f6" },
  { quarter: "Q3 2026", theme: "Innovation", description: "Advanced AI features, distributed intelligence, voice interaction, next-gen capabilities", icon: "‚ú®", color: "#a855f7" }
];

const totalItems = milestones.reduce((sum, m) => sum + m.totalItems, 0);
const totalCompleted = milestones.reduce((sum, m) => sum + m.completedItems, 0);
const overallProgress = Math.round((totalCompleted / totalItems) * 100);
---

<Layout
  title="Product Roadmap - Caro"
  description="Explore Caro's product roadmap: milestones, timeline, and strategic vision for your loyal shell companion."
>
  <!-- Presentation Container -->
  <div class="presentation" id="presentation">
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" id="progress-fill"></div>
    </div>

    <!-- Navigation Controls -->
    <div class="nav-controls">
      <button class="nav-btn" id="prev-btn" aria-label="Previous slide">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15,18 9,12 15,6"></polyline>
        </svg>
      </button>
      <div class="slide-counter">
        <span id="current-slide">1</span> / <span id="total-slides">7</span>
      </div>
      <button class="nav-btn" id="next-btn" aria-label="Next slide">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9,6 15,12 9,18"></polyline>
        </svg>
      </button>
    </div>

    <!-- Presenter Tools -->
    <div class="presenter-tools">
      <button class="tool-btn" id="fullscreen-btn" title="Toggle fullscreen (F)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
        </svg>
      </button>
      <button class="tool-btn" id="notes-btn" title="Toggle presenter notes (N)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14,2 14,8 20,8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <line x1="10" y1="9" x2="8" y2="9"></line>
        </svg>
      </button>
      <button class="tool-btn" id="overview-btn" title="Slide overview (O)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
      </button>
    </div>

    <!-- Slides Container -->
    <div class="slides-container" id="slides-container">

      <!-- Slide 1: Title -->
      <section class="slide slide-title active" data-slide="1">
        <div class="slide-content">
          <div class="title-badge">Product Roadmap 2026</div>
          <img src="/caro-prompting.gif" alt="Caro" class="title-mascot" />
          <h1 class="title-logo">Caro</h1>
          <p class="title-tagline">Your loyal shell companion</p>
          <div class="title-stats">
            <div class="stat">
              <span class="stat-value">{totalItems}</span>
              <span class="stat-label">Planned Items</span>
            </div>
            <div class="stat">
              <span class="stat-value">3</span>
              <span class="stat-label">Milestones</span>
            </div>
            <div class="stat">
              <span class="stat-value">6</span>
              <span class="stat-label">Months</span>
            </div>
          </div>
          <div class="scroll-hint">
            <span>Press <kbd>‚Üí</kbd> or <kbd>Space</kbd> to begin</span>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> Welcome to the Caro Product Roadmap presentation.
          This deck covers our 6-month development plan across 3 major milestones.
          Use arrow keys or swipe to navigate.
        </div>
      </section>

      <!-- Slide 2: Timeline Overview -->
      <section class="slide slide-timeline" data-slide="2">
        <div class="slide-content">
          <h2>Timeline Overview</h2>
          <p class="slide-subtitle">Our journey from foundation to innovation</p>

          <div class="timeline-visual">
            <div class="timeline-track">
              <div class="timeline-progress" style={`width: ${overallProgress}%`}></div>
            </div>

            <div class="timeline-milestones">
              {milestones.map((milestone, index) => (
                <div class="timeline-milestone" style={`--milestone-color: ${milestone.color}`}>
                  <div class="milestone-marker">
                    <span class="milestone-icon">{milestone.icon}</span>
                  </div>
                  <div class="milestone-info">
                    <span class="milestone-version">{milestone.version}</span>
                    <span class="milestone-date">{milestone.dueDate}</span>
                    <div class="milestone-progress-ring">
                      <svg viewBox="0 0 36 36">
                        <path
                          class="ring-bg"
                          d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                        />
                        <path
                          class="ring-fill"
                          stroke-dasharray={`${milestone.progress}, 100`}
                          d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                        />
                      </svg>
                      <span class="ring-text">{milestone.progress}%</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          <div class="themes-preview">
            {strategicThemes.map((theme) => (
              <div class="theme-card" style={`--theme-color: ${theme.color}`}>
                <span class="theme-icon">{theme.icon}</span>
                <div class="theme-content">
                  <span class="theme-quarter">{theme.quarter}</span>
                  <span class="theme-name">{theme.theme}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> This timeline shows our three major release milestones.
          Q1 focuses on foundation work, Q2 on public launch, Q3 on advanced features.
          Current overall progress: {overallProgress}%.
        </div>
      </section>

      <!-- Slide 3: v1.1.0 -->
      <section class="slide slide-milestone" data-slide="3">
        <div class="slide-content">
          <div class="milestone-header" style="--accent: #22c55e">
            <span class="milestone-badge">{milestones[0].icon} {milestones[0].version}</span>
            <h2>{milestones[0].title}</h2>
            <p class="milestone-focus">{milestones[0].focus}</p>
            <div class="milestone-meta">
              <span class="meta-item">üìÖ Due: {milestones[0].dueDate}</span>
              <span class="meta-item">‚è≥ {milestones[0].daysRemaining} days</span>
              <span class="meta-item">üìä {milestones[0].completedItems}/{milestones[0].totalItems} items</span>
            </div>
          </div>

          <div class="deliverables-grid">
            {milestones[0].deliverables.map((group) => (
              <div class="deliverable-group">
                <h4>{group.category}</h4>
                <ul>
                  {group.items.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>

          <div class="success-criteria">
            <h4>Success Criteria</h4>
            <div class="criteria-list">
              {milestones[0].successCriteria.map((criterion) => (
                <div class="criterion">
                  <span class="criterion-icon">‚úì</span>
                  <span>{criterion}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> v1.1.0 is our production-ready release.
          Critical bug fix is the top priority. HF model download and performance work follow.
          This milestone establishes our foundation for public launch.
        </div>
      </section>

      <!-- Slide 4: v1.2.0 -->
      <section class="slide slide-milestone" data-slide="4">
        <div class="slide-content">
          <div class="milestone-header" style="--accent: #3b82f6">
            <span class="milestone-badge">{milestones[1].icon} {milestones[1].version}</span>
            <h2>{milestones[1].title}</h2>
            <p class="milestone-focus">{milestones[1].focus}</p>
            <div class="milestone-meta">
              <span class="meta-item">üìÖ Due: {milestones[1].dueDate}</span>
              <span class="meta-item">‚è≥ {milestones[1].daysRemaining} days</span>
              <span class="meta-item">üìä {milestones[1].completedItems}/{milestones[1].totalItems} items</span>
            </div>
          </div>

          <div class="deliverables-grid">
            {milestones[1].deliverables.map((group) => (
              <div class="deliverable-group">
                <h4>{group.category}</h4>
                <ul>
                  {group.items.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>

          <div class="success-criteria">
            <h4>Success Criteria</h4>
            <div class="criteria-list">
              {milestones[1].successCriteria.map((criterion) => (
                <div class="criterion">
                  <span class="criterion-icon">‚úì</span>
                  <span>{criterion}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> v1.2.0 is our public launch milestone.
          Website, documentation, and marketing are the focus.
          This is when we go from soft launch to full public availability.
        </div>
      </section>

      <!-- Slide 5: v2.0.0 -->
      <section class="slide slide-milestone" data-slide="5">
        <div class="slide-content">
          <div class="milestone-header" style="--accent: #a855f7">
            <span class="milestone-badge">{milestones[2].icon} {milestones[2].version}</span>
            <h2>{milestones[2].title}</h2>
            <p class="milestone-focus">{milestones[2].focus}</p>
            <div class="milestone-meta">
              <span class="meta-item">üìÖ Due: {milestones[2].dueDate}</span>
              <span class="meta-item">‚è≥ {milestones[2].daysRemaining} days</span>
              <span class="meta-item">üìä {milestones[2].completedItems}/{milestones[2].totalItems} items</span>
            </div>
          </div>

          <div class="deliverables-grid">
            {milestones[2].deliverables.map((group) => (
              <div class="deliverable-group">
                <h4>{group.category}</h4>
                <ul>
                  {group.items.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>

          <div class="success-criteria">
            <h4>Success Criteria</h4>
            <div class="criteria-list">
              {milestones[2].successCriteria.map((criterion) => (
                <div class="criterion">
                  <span class="criterion-icon">‚úì</span>
                  <span>{criterion}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> v2.0.0 is our innovation milestone.
          Karo distributed intelligence and voice synthesis are flagship features.
          This positions Caro as a next-generation AI shell companion.
        </div>
      </section>

      <!-- Slide 6: Strategic Themes -->
      <section class="slide slide-themes" data-slide="6">
        <div class="slide-content">
          <h2>Strategic Themes</h2>
          <p class="slide-subtitle">Our quarterly focus areas for 2026</p>

          <div class="themes-detail">
            {strategicThemes.map((theme, index) => (
              <div class="theme-detail-card" style={`--theme-color: ${theme.color}; --delay: ${index * 0.2}s`}>
                <div class="theme-detail-icon">{theme.icon}</div>
                <div class="theme-detail-content">
                  <div class="theme-detail-header">
                    <span class="theme-detail-quarter">{theme.quarter}</span>
                    <h3>{theme.theme}</h3>
                  </div>
                  <p>{theme.description}</p>
                </div>
                <div class="theme-detail-accent"></div>
              </div>
            ))}
          </div>

          <div class="tracking-links">
            <h4>Project Tracking</h4>
            <div class="links-grid">
              <a href="https://github.com/users/wildcard/projects/2" target="_blank" class="tracking-link">
                <span class="link-icon">üîß</span>
                <span class="link-text">Product Development</span>
                <span class="link-count">36 items</span>
              </a>
              <a href="https://github.com/users/wildcard/projects/3" target="_blank" class="tracking-link">
                <span class="link-icon">üì¢</span>
                <span class="link-text">Marketing & DevRel</span>
                <span class="link-count">29 items</span>
              </a>
            </div>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> Strategic themes guide our quarterly priorities.
          Foundation ‚Üí Launch ‚Üí Innovation is the natural progression.
          All work is tracked in GitHub Projects for transparency.
        </div>
      </section>

      <!-- Slide 7: Summary & Call to Action -->
      <section class="slide slide-summary" data-slide="7">
        <div class="slide-content">
          <img src="/caro-prompting.gif" alt="Caro" class="summary-mascot" />
          <h2>Join the Journey</h2>
          <p class="slide-subtitle">Help us build the future of shell interaction</p>

          <div class="summary-stats">
            <div class="summary-stat">
              <span class="summary-value">{totalItems}</span>
              <span class="summary-label">Total Items</span>
            </div>
            <div class="summary-stat">
              <span class="summary-value">{overallProgress}%</span>
              <span class="summary-label">Complete</span>
            </div>
            <div class="summary-stat">
              <span class="summary-value">6</span>
              <span class="summary-label">Months to v2.0</span>
            </div>
          </div>

          <div class="cta-section">
            <a href="https://github.com/wildcard/caro" target="_blank" class="cta-button primary">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
              Star on GitHub
            </a>
            <a href="/#download" class="cta-button secondary">Get Started</a>
          </div>

          <div class="contribution-note">
            <p>üêï <em>"Every contribution makes Caro a better companion!"</em></p>
          </div>
        </div>
        <div class="presenter-notes">
          <strong>Presenter Notes:</strong> Thank you for viewing the Caro Product Roadmap!
          We welcome contributions from the community.
          Star us on GitHub and join our journey to revolutionize shell interaction.
        </div>
      </section>

    </div>

    <!-- Slide Overview Modal -->
    <div class="overview-modal" id="overview-modal">
      <div class="overview-content">
        <h3>Slide Overview</h3>
        <div class="overview-grid" id="overview-grid">
          <!-- Populated by JavaScript -->
        </div>
        <button class="close-overview" id="close-overview">Close</button>
      </div>
    </div>

    <!-- Keyboard Hints -->
    <div class="keyboard-hints" id="keyboard-hints">
      <div class="hint"><kbd>‚Üê</kbd><kbd>‚Üí</kbd> Navigate</div>
      <div class="hint"><kbd>Space</kbd> Next</div>
      <div class="hint"><kbd>F</kbd> Fullscreen</div>
      <div class="hint"><kbd>N</kbd> Notes</div>
      <div class="hint"><kbd>O</kbd> Overview</div>
      <div class="hint"><kbd>?</kbd> Hide hints</div>
    </div>
  </div>
</Layout>

<style>
  /* Presentation Container */
  .presentation {
    min-height: 100vh;
    background: var(--color-bg);
    position: relative;
    overflow: hidden;
  }

  /* Progress Bar */
  .progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--color-border);
    z-index: 1000;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff8c42 0%, #ff6b35 100%);
    transition: width 0.3s ease;
    width: 14.28%;
  }

  /* Navigation Controls */
  .nav-controls {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 12px 24px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 50px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    z-index: 100;
  }

  .nav-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: 2px solid var(--color-border);
    background: var(--color-bg);
    color: var(--color-text);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .nav-btn:hover {
    background: #ff8c42;
    border-color: #ff8c42;
    color: white;
  }

  .nav-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .nav-btn:disabled:hover {
    background: var(--color-bg);
    border-color: var(--color-border);
    color: var(--color-text);
  }

  .slide-counter {
    font-size: 16px;
    font-weight: 600;
    color: var(--color-text);
    min-width: 60px;
    text-align: center;
  }

  /* Presenter Tools */
  .presenter-tools {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 8px;
    z-index: 100;
  }

  .tool-btn {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    border: 1px solid var(--color-border);
    background: var(--color-bg-secondary);
    color: var(--color-text);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .tool-btn:hover {
    background: #ff8c42;
    border-color: #ff8c42;
    color: white;
  }

  .tool-btn.active {
    background: #ff8c42;
    border-color: #ff8c42;
    color: white;
  }

  /* Slides Container */
  .slides-container {
    width: 100%;
    height: 100vh;
    position: relative;
  }

  .slide {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 40px 120px;
    opacity: 0;
    visibility: hidden;
    transform: translateX(100px);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .slide.active {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
  }

  .slide.prev {
    transform: translateX(-100px);
  }

  .slide-content {
    max-width: 1100px;
    width: 100%;
    text-align: center;
  }

  .slide h2 {
    font-size: 48px;
    margin-bottom: 16px;
    color: var(--color-text);
  }

  .slide-subtitle {
    font-size: 20px;
    color: var(--color-text-secondary);
    margin-bottom: 40px;
  }

  /* Presenter Notes */
  .presenter-notes {
    position: fixed;
    bottom: 100px;
    left: 20px;
    right: 20px;
    max-width: 600px;
    margin: 0 auto;
    padding: 16px 20px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    font-size: 14px;
    color: var(--color-text-secondary);
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.3s ease;
  }

  .presenter-notes.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Title Slide */
  .slide-title .title-badge {
    display: inline-block;
    background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%);
    color: white;
    padding: 8px 24px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 24px;
  }

  .title-mascot {
    width: 120px;
    height: auto;
    image-rendering: pixelated;
    margin-bottom: -20px;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  .title-logo {
    font-size: 96px;
    font-weight: 700;
    background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 16px;
  }

  .title-tagline {
    font-size: 28px;
    color: var(--color-text-secondary);
    margin-bottom: 48px;
  }

  .title-stats {
    display: flex;
    justify-content: center;
    gap: 60px;
    margin-bottom: 48px;
  }

  .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .stat-value {
    font-size: 48px;
    font-weight: 700;
    color: #ff8c42;
  }

  .stat-label {
    font-size: 14px;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .scroll-hint {
    color: var(--color-text-secondary);
    font-size: 14px;
    animation: pulse 2s ease-in-out infinite;
  }

  .scroll-hint kbd {
    display: inline-block;
    padding: 4px 8px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 4px;
    font-family: inherit;
    font-size: 12px;
  }

  @keyframes pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  /* Timeline Slide */
  .timeline-visual {
    margin: 40px 0;
  }

  .timeline-track {
    height: 8px;
    background: var(--color-border);
    border-radius: 4px;
    margin-bottom: 40px;
    position: relative;
  }

  .timeline-progress {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background: linear-gradient(90deg, #22c55e 0%, #3b82f6 50%, #a855f7 100%);
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  .timeline-milestones {
    display: flex;
    justify-content: space-between;
    padding: 0 40px;
  }

  .timeline-milestone {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  .milestone-marker {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--milestone-color);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
  }

  .milestone-icon {
    font-size: 28px;
  }

  .milestone-info {
    text-align: center;
  }

  .milestone-version {
    display: block;
    font-size: 18px;
    font-weight: 700;
    color: var(--color-text);
  }

  .milestone-date {
    display: block;
    font-size: 13px;
    color: var(--color-text-secondary);
    margin-top: 4px;
  }

  .milestone-progress-ring {
    width: 50px;
    height: 50px;
    position: relative;
    margin-top: 12px;
  }

  .milestone-progress-ring svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }

  .ring-bg {
    fill: none;
    stroke: var(--color-border);
    stroke-width: 3;
  }

  .ring-fill {
    fill: none;
    stroke: var(--milestone-color);
    stroke-width: 3;
    stroke-linecap: round;
    transition: stroke-dasharray 0.5s ease;
  }

  .ring-text {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    color: var(--color-text);
  }

  .themes-preview {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-top: 48px;
  }

  .theme-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    border-left: 4px solid var(--theme-color);
    transition: transform 0.2s;
  }

  .theme-card:hover {
    transform: translateY(-2px);
  }

  .theme-icon {
    font-size: 24px;
  }

  .theme-content {
    text-align: left;
  }

  .theme-quarter {
    display: block;
    font-size: 12px;
    color: var(--theme-color);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .theme-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--color-text);
  }

  /* Milestone Slides */
  .slide-milestone .milestone-header {
    margin-bottom: 40px;
  }

  .milestone-badge {
    display: inline-block;
    padding: 8px 20px;
    background: var(--accent);
    color: white;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .milestone-focus {
    font-size: 18px;
    color: var(--color-text-secondary);
    margin-bottom: 16px;
  }

  .milestone-meta {
    display: flex;
    justify-content: center;
    gap: 24px;
    flex-wrap: wrap;
  }

  .meta-item {
    font-size: 14px;
    color: var(--color-text-secondary);
    padding: 6px 12px;
    background: var(--color-bg-secondary);
    border-radius: 6px;
  }

  .deliverables-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    text-align: left;
    margin-bottom: 32px;
  }

  .deliverable-group {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: 20px;
  }

  .deliverable-group h4 {
    font-size: 14px;
    color: var(--accent, #ff8c42);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }

  .deliverable-group ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .deliverable-group li {
    font-size: 13px;
    color: var(--color-text);
    padding: 6px 0;
    border-bottom: 1px solid var(--color-border);
  }

  .deliverable-group li:last-child {
    border-bottom: none;
  }

  .success-criteria {
    background: var(--color-bg-tertiary);
    border-radius: 12px;
    padding: 24px;
  }

  .success-criteria h4 {
    font-size: 16px;
    color: var(--color-text);
    margin-bottom: 16px;
  }

  .criteria-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
  }

  .criterion {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    font-size: 13px;
    color: var(--color-text);
  }

  .criterion-icon {
    color: #22c55e;
    font-weight: bold;
  }

  /* Themes Slide */
  .themes-detail {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 48px;
  }

  .theme-detail-card {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 24px 32px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    text-align: left;
    position: relative;
    overflow: hidden;
    animation: slideIn 0.5s ease forwards;
    animation-delay: var(--delay);
    opacity: 0;
    transform: translateX(-20px);
  }

  @keyframes slideIn {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .theme-detail-icon {
    font-size: 48px;
    flex-shrink: 0;
  }

  .theme-detail-content {
    flex: 1;
  }

  .theme-detail-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 8px;
  }

  .theme-detail-quarter {
    padding: 4px 12px;
    background: var(--theme-color);
    color: white;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
  }

  .theme-detail-card h3 {
    font-size: 24px;
    color: var(--color-text);
    margin: 0;
  }

  .theme-detail-card p {
    font-size: 15px;
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
  }

  .theme-detail-accent {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--theme-color);
  }

  .tracking-links h4 {
    font-size: 16px;
    color: var(--color-text);
    margin-bottom: 16px;
  }

  .links-grid {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }

  .tracking-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    text-decoration: none;
    color: var(--color-text);
    transition: all 0.2s;
  }

  .tracking-link:hover {
    border-color: #ff8c42;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 140, 66, 0.15);
  }

  .link-icon {
    font-size: 24px;
  }

  .link-text {
    font-weight: 600;
  }

  .link-count {
    padding: 4px 10px;
    background: var(--color-bg);
    border-radius: 12px;
    font-size: 12px;
    color: var(--color-text-secondary);
  }

  /* Summary Slide */
  .summary-mascot {
    width: 80px;
    height: auto;
    image-rendering: pixelated;
    animation: float 3s ease-in-out infinite;
    margin-bottom: 16px;
  }

  .summary-stats {
    display: flex;
    justify-content: center;
    gap: 48px;
    margin: 40px 0;
  }

  .summary-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .summary-value {
    font-size: 56px;
    font-weight: 700;
    background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .summary-label {
    font-size: 14px;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .cta-section {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-bottom: 32px;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 16px 32px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s;
  }

  .cta-button.primary {
    background: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%);
    color: white;
  }

  .cta-button.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 140, 66, 0.3);
  }

  .cta-button.secondary {
    background: transparent;
    border: 2px solid #ff8c42;
    color: #ff8c42;
  }

  .cta-button.secondary:hover {
    background: rgba(255, 140, 66, 0.1);
  }

  .contribution-note {
    color: var(--color-text-secondary);
    font-size: 16px;
  }

  /* Overview Modal */
  .overview-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
  }

  .overview-modal.visible {
    opacity: 1;
    visibility: visible;
  }

  .overview-content {
    background: var(--color-bg);
    border-radius: 16px;
    padding: 32px;
    max-width: 900px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
  }

  .overview-content h3 {
    font-size: 24px;
    color: var(--color-text);
    margin-bottom: 24px;
    text-align: center;
  }

  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
  }

  .overview-slide {
    padding: 16px;
    background: var(--color-bg-secondary);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
  }

  .overview-slide:hover {
    border-color: #ff8c42;
    transform: translateY(-2px);
  }

  .overview-slide.current {
    border-color: #ff8c42;
    background: rgba(255, 140, 66, 0.1);
  }

  .overview-slide-number {
    font-size: 24px;
    font-weight: 700;
    color: #ff8c42;
    margin-bottom: 8px;
  }

  .overview-slide-title {
    font-size: 14px;
    color: var(--color-text);
  }

  .close-overview {
    display: block;
    margin: 0 auto;
    padding: 12px 32px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    color: var(--color-text);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .close-overview:hover {
    background: #ff8c42;
    border-color: #ff8c42;
    color: white;
  }

  /* Keyboard Hints */
  .keyboard-hints {
    position: fixed;
    bottom: 100px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 16px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    font-size: 12px;
    color: var(--color-text-secondary);
    opacity: 0.8;
    transition: opacity 0.3s;
  }

  .keyboard-hints:hover {
    opacity: 1;
  }

  .keyboard-hints.hidden {
    opacity: 0;
    visibility: hidden;
  }

  .hint {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .hint kbd {
    display: inline-block;
    padding: 2px 6px;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 4px;
    font-family: inherit;
    font-size: 11px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .slide {
      padding: 40px 20px 140px;
    }

    .slide h2 {
      font-size: 32px;
    }

    .title-logo {
      font-size: 64px;
    }

    .title-tagline {
      font-size: 20px;
    }

    .title-stats {
      gap: 32px;
    }

    .stat-value {
      font-size: 36px;
    }

    .timeline-milestones {
      flex-direction: column;
      gap: 24px;
      padding: 0;
    }

    .timeline-milestone {
      flex-direction: row;
      text-align: left;
    }

    .themes-preview {
      flex-direction: column;
      align-items: center;
    }

    .theme-card {
      width: 100%;
      max-width: 300px;
    }

    .deliverables-grid {
      grid-template-columns: 1fr;
    }

    .summary-stats {
      flex-direction: column;
      gap: 24px;
    }

    .summary-value {
      font-size: 42px;
    }

    .cta-section {
      flex-direction: column;
      align-items: center;
    }

    .keyboard-hints {
      display: none;
    }

    .presenter-tools {
      top: 10px;
      right: 10px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    let currentSlide = 1;
    let notesVisible = false;
    let overviewVisible = false;
    let hintsVisible = true;

    // DOM Elements
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const currentSlideEl = document.getElementById('current-slide');
    const totalSlidesEl = document.getElementById('total-slides');
    const progressFill = document.getElementById('progress-fill');
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    const notesBtn = document.getElementById('notes-btn');
    const overviewBtn = document.getElementById('overview-btn');
    const overviewModal = document.getElementById('overview-modal');
    const overviewGrid = document.getElementById('overview-grid');
    const closeOverview = document.getElementById('close-overview');
    const keyboardHints = document.getElementById('keyboard-hints');

    // Initialize
    totalSlidesEl!.textContent = String(totalSlides);
    buildOverviewGrid();
    updateSlide();

    // Navigation functions
    function goToSlide(n: number) {
      if (n < 1 || n > totalSlides) return;

      const prevSlide = currentSlide;
      currentSlide = n;

      slides.forEach((slide, index) => {
        slide.classList.remove('active', 'prev');
        if (index + 1 === currentSlide) {
          slide.classList.add('active');
        } else if (index + 1 < currentSlide) {
          slide.classList.add('prev');
        }
      });

      updateSlide();

      // Close overview if open
      if (overviewVisible) {
        toggleOverview();
      }
    }

    function nextSlide() {
      goToSlide(currentSlide + 1);
    }

    function prevSlide() {
      goToSlide(currentSlide - 1);
    }

    function updateSlide() {
      currentSlideEl!.textContent = String(currentSlide);
      progressFill!.style.width = `${(currentSlide / totalSlides) * 100}%`;

      prevBtn!.disabled = currentSlide === 1;
      nextBtn!.disabled = currentSlide === totalSlides;

      // Update notes visibility
      const currentNotes = slides[currentSlide - 1].querySelector('.presenter-notes');
      document.querySelectorAll('.presenter-notes').forEach(note => {
        note.classList.remove('visible');
      });
      if (notesVisible && currentNotes) {
        currentNotes.classList.add('visible');
      }

      // Update overview grid
      updateOverviewGrid();
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        fullscreenBtn!.classList.add('active');
      } else {
        document.exitFullscreen();
        fullscreenBtn!.classList.remove('active');
      }
    }

    function toggleNotes() {
      notesVisible = !notesVisible;
      notesBtn!.classList.toggle('active', notesVisible);

      const currentNotes = slides[currentSlide - 1].querySelector('.presenter-notes');
      if (currentNotes) {
        currentNotes.classList.toggle('visible', notesVisible);
      }
    }

    function toggleOverview() {
      overviewVisible = !overviewVisible;
      overviewModal!.classList.toggle('visible', overviewVisible);
      overviewBtn!.classList.toggle('active', overviewVisible);
    }

    function toggleHints() {
      hintsVisible = !hintsVisible;
      keyboardHints!.classList.toggle('hidden', !hintsVisible);
    }

    function buildOverviewGrid() {
      const slideTitles = [
        'Title',
        'Timeline Overview',
        'v1.1.0 - Core',
        'v1.2.0 - Website',
        'v2.0.0 - Advanced',
        'Strategic Themes',
        'Summary'
      ];

      overviewGrid!.innerHTML = slideTitles.map((title, index) => `
        <div class="overview-slide ${index + 1 === currentSlide ? 'current' : ''}" data-slide="${index + 1}">
          <div class="overview-slide-number">${index + 1}</div>
          <div class="overview-slide-title">${title}</div>
        </div>
      `).join('');

      // Add click handlers
      overviewGrid!.querySelectorAll('.overview-slide').forEach(el => {
        el.addEventListener('click', () => {
          const slideNum = parseInt(el.getAttribute('data-slide') || '1');
          goToSlide(slideNum);
        });
      });
    }

    function updateOverviewGrid() {
      overviewGrid!.querySelectorAll('.overview-slide').forEach((el, index) => {
        el.classList.toggle('current', index + 1 === currentSlide);
      });
    }

    // Event Listeners
    prevBtn!.addEventListener('click', prevSlide);
    nextBtn!.addEventListener('click', nextSlide);
    fullscreenBtn!.addEventListener('click', toggleFullscreen);
    notesBtn!.addEventListener('click', toggleNotes);
    overviewBtn!.addEventListener('click', toggleOverview);
    closeOverview!.addEventListener('click', toggleOverview);

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      // Ignore if in input
      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) return;

      switch (e.key) {
        case 'ArrowRight':
        case ' ':
          e.preventDefault();
          nextSlide();
          break;
        case 'ArrowLeft':
          e.preventDefault();
          prevSlide();
          break;
        case 'f':
        case 'F':
          e.preventDefault();
          toggleFullscreen();
          break;
        case 'n':
        case 'N':
          e.preventDefault();
          toggleNotes();
          break;
        case 'o':
        case 'O':
          e.preventDefault();
          toggleOverview();
          break;
        case 'Escape':
          if (overviewVisible) {
            toggleOverview();
          }
          break;
        case '?':
          e.preventDefault();
          toggleHints();
          break;
        case 'Home':
          e.preventDefault();
          goToSlide(1);
          break;
        case 'End':
          e.preventDefault();
          goToSlide(totalSlides);
          break;
      }

      // Number keys for direct navigation
      if (e.key >= '1' && e.key <= '9') {
        const slideNum = parseInt(e.key);
        if (slideNum <= totalSlides) {
          goToSlide(slideNum);
        }
      }
    });

    // Touch/swipe navigation
    let touchStartX = 0;
    let touchEndX = 0;

    document.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    document.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }, { passive: true });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;

      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          nextSlide();
        } else {
          prevSlide();
        }
      }
    }

    // Fullscreen change handler
    document.addEventListener('fullscreenchange', () => {
      fullscreenBtn!.classList.toggle('active', !!document.fullscreenElement);
    });

    // Click on overview backdrop to close
    overviewModal!.addEventListener('click', (e) => {
      if (e.target === overviewModal) {
        toggleOverview();
      }
    });
  });
</script>
