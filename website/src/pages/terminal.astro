---
/**
 * Terminal-Centric Landing Page (Buildkite-inspired)
 *
 * Design Philosophy:
 * - CLI-first interface with REAL command-based navigation
 * - Dark terminal aesthetic as default
 * - Trust and reliability focused messaging
 * - Interactive terminal where users can TYPE commands
 *
 * Inspired by: buildkite.com's interactive terminal
 *
 * STYLE ISOLATION: All styles are scoped to .terminal-page to prevent
 * bleeding into other pages. No global selectors used.
 */
import { SITE_CONFIG } from '../config/site';
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Caro - Safe shell commands you can trust. Convert natural language to validated POSIX commands with local AI inference." />
  <meta name="robots" content="index, follow" />

  <!-- Open Graph -->
  <meta property="og:title" content="Caro | Safe Shell Commands You Can Trust" />
  <meta property="og:description" content="Convert natural language to validated POSIX shell commands. Safety-first design with 52+ dangerous pattern detection." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://caro.sh/terminal" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Caro | Safe Shell Commands You Can Trust" />
  <meta name="twitter:description" content="Convert natural language to validated POSIX shell commands. Safety-first design." />

  <link rel="icon" type="image/png" href="/caro-pixel.png" />
  <title>Caro | Your Tools Should Earn Your Trust</title>
</head>
<body>
  <!-- Main wrapper with scoped class for style isolation -->
  <div class="terminal-page" data-theme="dark">

    <!-- Hero Section with Interactive CLI -->
    <section class="tp-hero">
      <div class="tp-container">
        <!-- Logo -->
        <div class="tp-logo-section">
          <img src="/caro-pixel.png" alt="Caro" class="tp-logo-img" />
          <span class="tp-logo-text">caro</span>
          <span class="tp-version">v{SITE_CONFIG.version}</span>
        </div>

        <!-- Main Headline -->
        <h1 class="tp-headline">
          Your tools should <strong>earn your trust</strong>,<br/>
          not ask for it.
        </h1>

        <!-- Interactive Terminal -->
        <div class="tp-terminal" id="terminal">
          <div class="tp-terminal-header">
            <div class="tp-dots">
              <span class="tp-dot tp-dot-red"></span>
              <span class="tp-dot tp-dot-yellow"></span>
              <span class="tp-dot tp-dot-green"></span>
            </div>
            <span class="tp-terminal-title">~/caro</span>
            <div class="tp-theme-switcher">
              <button class="tp-theme-btn active" data-theme="dark" title="Dark">‚óè</button>
              <button class="tp-theme-btn" data-theme="light" title="Light">‚óã</button>
              <button class="tp-theme-btn" data-theme="amber" title="CRT Amber">‚óê</button>
              <button class="tp-theme-btn" data-theme="green" title="CRT Green">‚óë</button>
            </div>
          </div>

          <div class="tp-terminal-body" id="terminal-body">
            <!-- Terminal output will be rendered here -->
            <div id="terminal-output"></div>

            <!-- Input line -->
            <div class="tp-input-line">
              <span class="tp-prompt">~/caro $</span>
              <input
                type="text"
                id="terminal-input"
                class="tp-input"
                autocomplete="off"
                autocapitalize="off"
                spellcheck="false"
                placeholder="Type 'help' for commands..."
              />
            </div>
          </div>
        </div>

        <p class="tp-hint">Click the terminal and start typing. Try <code>help</code> to see available commands.</p>
      </div>
    </section>

    <!-- Content Sections (hidden by default, shown via commands) -->
    <section class="tp-section" id="section-capabilities" style="display: none;">
      <div class="tp-container">
        <h2 class="tp-section-title">Capabilities</h2>
        <p class="tp-section-subtitle">Dependable signals built on a foundation you can trust.</p>

        <div class="tp-grid">
          <div class="tp-card">
            <div class="tp-card-icon">üõ°Ô∏è</div>
            <h3>Pattern-Based Safety</h3>
            <p>52+ pre-compiled dangerous command patterns. Blocks rm -rf /, fork bombs, disk wipers. No AI hallucinations in safety checks.</p>
          </div>
          <div class="tp-card">
            <div class="tp-card-icon">üîí</div>
            <h3>100% Local Inference</h3>
            <p>Your commands never leave your machine. Embedded LLM runs entirely locally. Air-gapped environments supported.</p>
          </div>
          <div class="tp-card">
            <div class="tp-card-icon">üåç</div>
            <h3>Platform Aware</h3>
            <p>Detects OS, architecture, shell type, and available commands. Generates platform-specific POSIX-compliant commands.</p>
          </div>
          <div class="tp-card">
            <div class="tp-card-icon">‚ö°</div>
            <h3>Single Binary</h3>
            <p>No dependencies. No runtime. Just one binary. Install and run in seconds on Linux, macOS, or Windows.</p>
          </div>
          <div class="tp-card">
            <div class="tp-card-icon">üéØ</div>
            <h3>Deterministic Validation</h3>
            <p>Safety checks are pattern-based, not probabilistic. Same input = same safety verdict. Every time.</p>
          </div>
          <div class="tp-card">
            <div class="tp-card-icon">üîÑ</div>
            <h3>Agentic Refinement</h3>
            <p>2-iteration loop that detects platform compatibility issues and refines complex commands automatically.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="tp-section" id="section-proof" style="display: none;">
      <div class="tp-container">
        <h2 class="tp-section-title">See It In Action</h2>

        <div class="tp-demo-box">
          <div class="tp-demo-example">
            <div class="tp-demo-label">Safe Command</div>
            <div class="tp-demo-input">$ caro "find all python files modified today"</div>
            <div class="tp-demo-output">
              <code>find . -name "*.py" -type f -mtime 0</code>
              <span class="tp-demo-status tp-safe">‚úì Safe to run</span>
            </div>
          </div>

          <div class="tp-demo-example">
            <div class="tp-demo-label">Dangerous Command Blocked</div>
            <div class="tp-demo-input tp-danger">$ caro "delete everything recursively"</div>
            <div class="tp-demo-output">
              <code>rm -rf /</code>
              <span class="tp-demo-status tp-blocked">‚úï BLOCKED: System destruction pattern</span>
            </div>
          </div>

          <div class="tp-demo-example">
            <div class="tp-demo-label">Platform-Aware Output</div>
            <div class="tp-demo-input">$ caro "show top 5 processes by CPU"</div>
            <div class="tp-demo-output">
              <code>ps aux | sort -nrk 3,3 | head -6</code>
              <span class="tp-demo-status tp-safe">‚úì Optimized for macOS (BSD syntax)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="tp-section" id="section-install" style="display: none;">
      <div class="tp-container">
        <h2 class="tp-section-title">Install Caro</h2>
        <p class="tp-section-subtitle">Get started in seconds. No configuration required.</p>

        <div class="tp-install-box">
          <div class="tp-install-method">
            <h3>Quick Install (Recommended)</h3>
            <div class="tp-install-command">
              <code>curl -fsSL https://caro.sh/install | bash</code>
              <button class="tp-copy-btn" data-copy="curl -fsSL https://caro.sh/install | bash">Copy</button>
            </div>
          </div>

          <div class="tp-install-method">
            <h3>Via Cargo</h3>
            <div class="tp-install-command">
              <code>cargo install caro</code>
              <button class="tp-copy-btn" data-copy="cargo install caro">Copy</button>
            </div>
          </div>

          <div class="tp-install-method">
            <h3>Pre-built Binaries</h3>
            <p class="tp-install-note">Download from <a href="https://github.com/wildcard/caro/releases" target="_blank">GitHub Releases</a></p>
          </div>
        </div>
      </div>
    </section>

    <section class="tp-section" id="section-stats" style="display: none;">
      <div class="tp-container">
        <h2 class="tp-section-title">By The Numbers</h2>

        <div class="tp-stats-grid">
          <div class="tp-stat">
            <div class="tp-stat-value">52+</div>
            <div class="tp-stat-label">Safety Patterns</div>
          </div>
          <div class="tp-stat">
            <div class="tp-stat-value">100%</div>
            <div class="tp-stat-label">Local Inference</div>
          </div>
          <div class="tp-stat">
            <div class="tp-stat-value">0</div>
            <div class="tp-stat-label">Cloud Dependencies</div>
          </div>
          <div class="tp-stat">
            <div class="tp-stat-value">3</div>
            <div class="tp-stat-label">Platforms</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="tp-footer">
      <div class="tp-container">
        <div class="tp-footer-content">
          <span>caro v{SITE_CONFIG.version} ‚Ä¢ AGPL-3.0 ‚Ä¢ Built with Rust</span>
          <div class="tp-footer-links">
            <a href="/">Main Site</a>
            <a href="https://github.com/wildcard/caro" target="_blank">GitHub</a>
            <a href="/faq">FAQ</a>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <style>
    /* ===========================================
       TERMINAL PAGE STYLES - FULLY SCOPED
       All styles prefixed with .terminal-page
       to prevent bleeding to other pages
       =========================================== */

    /* CSS Variables scoped to terminal page */
    .terminal-page {
      --tp-bg: #0d1117;
      --tp-bg-secondary: #161b22;
      --tp-bg-tertiary: #21262d;
      --tp-text: #e6edf3;
      --tp-text-muted: #8b949e;
      --tp-text-dim: #484f58;
      --tp-accent: #ff8c42;
      --tp-accent-hover: #ff6b35;
      --tp-success: #3fb950;
      --tp-error: #f85149;
      --tp-info: #58a6ff;
      --tp-border: #30363d;
      --tp-cursor: #ff8c42;
      --tp-font: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;

      /* Base styles for the page */
      font-family: var(--tp-font);
      background: var(--tp-bg);
      color: var(--tp-text);
      line-height: 1.6;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }

    /* Theme variations */
    .terminal-page[data-theme="light"] {
      --tp-bg: #ffffff;
      --tp-bg-secondary: #f6f8fa;
      --tp-bg-tertiary: #eaeef2;
      --tp-text: #1f2328;
      --tp-text-muted: #656d76;
      --tp-text-dim: #8c959f;
      --tp-border: #d0d7de;
    }

    .terminal-page[data-theme="amber"] {
      --tp-bg: #0a0800;
      --tp-bg-secondary: #141000;
      --tp-bg-tertiary: #1e1800;
      --tp-text: #ffb000;
      --tp-text-muted: #cc8c00;
      --tp-text-dim: #806000;
      --tp-accent: #ffcc00;
      --tp-success: #44ff44;
      --tp-cursor: #ffb000;
      --tp-border: #3a2800;
    }

    .terminal-page[data-theme="green"] {
      --tp-bg: #001200;
      --tp-bg-secondary: #001a00;
      --tp-bg-tertiary: #002200;
      --tp-text: #00ff00;
      --tp-text-muted: #00cc00;
      --tp-text-dim: #008000;
      --tp-accent: #00ff88;
      --tp-success: #00ff00;
      --tp-cursor: #00ff00;
      --tp-border: #004400;
    }

    /* CRT Scanline effect for retro themes */
    .terminal-page[data-theme="amber"]::after,
    .terminal-page[data-theme="green"]::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 9999;
    }

    /* Container */
    .terminal-page .tp-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Hero Section */
    .terminal-page .tp-hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 40px 0;
    }

    .terminal-page .tp-logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 40px;
    }

    .terminal-page .tp-logo-img {
      width: 48px;
      height: 48px;
      image-rendering: pixelated;
    }

    .terminal-page .tp-logo-text {
      font-size: 36px;
      font-weight: 700;
      color: var(--tp-accent);
    }

    .terminal-page .tp-version {
      font-size: 12px;
      color: var(--tp-text-dim);
      background: var(--tp-bg-tertiary);
      padding: 4px 8px;
      border-radius: 4px;
    }

    .terminal-page .tp-headline {
      font-size: clamp(24px, 4vw, 40px);
      font-weight: 400;
      margin-bottom: 40px;
      color: var(--tp-text);
      line-height: 1.4;
    }

    .terminal-page .tp-headline strong {
      color: var(--tp-accent);
      font-weight: 600;
    }

    /* Interactive Terminal */
    .terminal-page .tp-terminal {
      width: 100%;
      max-width: 700px;
      background: var(--tp-bg-secondary);
      border: 1px solid var(--tp-border);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    }

    .terminal-page .tp-terminal-header {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background: var(--tp-bg-tertiary);
      border-bottom: 1px solid var(--tp-border);
    }

    .terminal-page .tp-dots {
      display: flex;
      gap: 8px;
    }

    .terminal-page .tp-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .terminal-page .tp-dot-red { background: #ff5f56; }
    .terminal-page .tp-dot-yellow { background: #ffbd2e; }
    .terminal-page .tp-dot-green { background: #27c93f; }

    .terminal-page .tp-terminal-title {
      flex: 1;
      text-align: center;
      font-size: 13px;
      color: var(--tp-text-dim);
    }

    .terminal-page .tp-theme-switcher {
      display: flex;
      gap: 4px;
    }

    .terminal-page .tp-theme-btn {
      width: 20px;
      height: 20px;
      border: 1px solid var(--tp-border);
      background: transparent;
      color: var(--tp-text-muted);
      border-radius: 4px;
      cursor: pointer;
      font-size: 10px;
      transition: all 0.2s;
    }

    .terminal-page .tp-theme-btn:hover {
      border-color: var(--tp-accent);
      color: var(--tp-accent);
    }

    .terminal-page .tp-theme-btn.active {
      background: var(--tp-accent);
      border-color: var(--tp-accent);
      color: var(--tp-bg);
    }

    .terminal-page .tp-terminal-body {
      padding: 20px;
      min-height: 300px;
      max-height: 400px;
      overflow-y: auto;
    }

    /* Terminal Output */
    .terminal-page .tp-output-line {
      margin-bottom: 8px;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .terminal-page .tp-output-line.tp-cmd {
      color: var(--tp-text-muted);
    }

    .terminal-page .tp-output-line.tp-cmd::before {
      content: '~/caro $ ';
      color: var(--tp-success);
    }

    .terminal-page .tp-output-line.tp-result {
      color: var(--tp-text);
      padding-left: 16px;
    }

    .terminal-page .tp-output-line.tp-error {
      color: var(--tp-error);
    }

    .terminal-page .tp-output-line.tp-accent {
      color: var(--tp-accent);
    }

    .terminal-page .tp-output-line.tp-info {
      color: var(--tp-info);
    }

    .terminal-page .tp-output-line.tp-dim {
      color: var(--tp-text-dim);
    }

    /* Help menu box */
    .terminal-page .tp-help-box {
      border: 1px solid var(--tp-border);
      border-radius: 6px;
      padding: 16px;
      margin: 12px 0;
      background: var(--tp-bg);
    }

    .terminal-page .tp-help-title {
      color: var(--tp-accent);
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .terminal-page .tp-help-item {
      display: flex;
      gap: 16px;
      margin-bottom: 6px;
      font-size: 13px;
    }

    .terminal-page .tp-help-cmd {
      color: var(--tp-info);
      min-width: 120px;
      font-weight: 500;
    }

    .terminal-page .tp-help-desc {
      color: var(--tp-text-muted);
    }

    /* Input line */
    .terminal-page .tp-input-line {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 12px;
    }

    .terminal-page .tp-prompt {
      color: var(--tp-success);
      font-weight: 500;
      flex-shrink: 0;
    }

    .terminal-page .tp-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--tp-text);
      font-family: var(--tp-font);
      font-size: 14px;
      outline: none;
      caret-color: var(--tp-cursor);
    }

    .terminal-page .tp-input::placeholder {
      color: var(--tp-text-dim);
    }

    .terminal-page .tp-hint {
      margin-top: 20px;
      font-size: 13px;
      color: var(--tp-text-dim);
    }

    .terminal-page .tp-hint code {
      color: var(--tp-info);
      background: var(--tp-bg-tertiary);
      padding: 2px 6px;
      border-radius: 3px;
    }

    /* Content Sections */
    .terminal-page .tp-section {
      padding: 80px 0;
      border-top: 1px solid var(--tp-border);
    }

    .terminal-page .tp-section-title {
      font-size: 28px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 16px;
      color: var(--tp-text);
    }

    .terminal-page .tp-section-subtitle {
      text-align: center;
      color: var(--tp-text-muted);
      margin-bottom: 40px;
    }

    /* Card Grid */
    .terminal-page .tp-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .terminal-page .tp-card {
      background: var(--tp-bg-secondary);
      border: 1px solid var(--tp-border);
      border-radius: 8px;
      padding: 24px;
      transition: all 0.2s;
    }

    .terminal-page .tp-card:hover {
      border-color: var(--tp-accent);
      transform: translateY(-2px);
    }

    .terminal-page .tp-card-icon {
      font-size: 28px;
      margin-bottom: 12px;
    }

    .terminal-page .tp-card h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--tp-text);
    }

    .terminal-page .tp-card p {
      font-size: 14px;
      color: var(--tp-text-muted);
      line-height: 1.5;
    }

    /* Demo Box */
    .terminal-page .tp-demo-box {
      background: var(--tp-bg-secondary);
      border: 1px solid var(--tp-border);
      border-radius: 8px;
      overflow: hidden;
    }

    .terminal-page .tp-demo-example {
      padding: 20px;
      border-bottom: 1px solid var(--tp-border);
    }

    .terminal-page .tp-demo-example:last-child {
      border-bottom: none;
    }

    .terminal-page .tp-demo-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--tp-text-dim);
      margin-bottom: 8px;
    }

    .terminal-page .tp-demo-input {
      font-size: 14px;
      color: var(--tp-text);
      margin-bottom: 12px;
    }

    .terminal-page .tp-demo-input.tp-danger {
      color: var(--tp-error);
    }

    .terminal-page .tp-demo-output {
      background: var(--tp-bg);
      padding: 12px 16px;
      border-radius: 6px;
      border-left: 3px solid var(--tp-accent);
    }

    .terminal-page .tp-demo-output code {
      display: block;
      color: var(--tp-info);
      margin-bottom: 8px;
    }

    .terminal-page .tp-demo-status {
      font-size: 12px;
    }

    .terminal-page .tp-demo-status.tp-safe {
      color: var(--tp-success);
    }

    .terminal-page .tp-demo-status.tp-blocked {
      color: var(--tp-error);
    }

    /* Install Box */
    .terminal-page .tp-install-box {
      max-width: 500px;
      margin: 0 auto;
    }

    .terminal-page .tp-install-method {
      margin-bottom: 24px;
    }

    .terminal-page .tp-install-method h3 {
      font-size: 14px;
      font-weight: 600;
      color: var(--tp-text);
      margin-bottom: 12px;
    }

    .terminal-page .tp-install-command {
      display: flex;
      align-items: center;
      gap: 12px;
      background: var(--tp-bg-secondary);
      border: 1px solid var(--tp-border);
      padding: 12px 16px;
      border-radius: 6px;
    }

    .terminal-page .tp-install-command code {
      flex: 1;
      color: var(--tp-text);
    }

    .terminal-page .tp-copy-btn {
      background: var(--tp-accent);
      color: var(--tp-bg);
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      font-family: var(--tp-font);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .terminal-page .tp-copy-btn:hover {
      background: var(--tp-accent-hover);
    }

    .terminal-page .tp-install-note {
      color: var(--tp-text-muted);
      font-size: 14px;
    }

    .terminal-page .tp-install-note a {
      color: var(--tp-info);
      text-decoration: none;
    }

    .terminal-page .tp-install-note a:hover {
      text-decoration: underline;
    }

    /* Stats Grid */
    .terminal-page .tp-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 24px;
      text-align: center;
    }

    .terminal-page .tp-stat {
      padding: 24px;
      background: var(--tp-bg-secondary);
      border: 1px solid var(--tp-border);
      border-radius: 8px;
    }

    .terminal-page .tp-stat-value {
      font-size: 36px;
      font-weight: 700;
      color: var(--tp-accent);
      margin-bottom: 8px;
    }

    .terminal-page .tp-stat-label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--tp-text-muted);
    }

    /* Footer */
    .terminal-page .tp-footer {
      padding: 30px 0;
      border-top: 1px solid var(--tp-border);
      background: var(--tp-bg-secondary);
    }

    .terminal-page .tp-footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
      font-size: 13px;
      color: var(--tp-text-dim);
    }

    .terminal-page .tp-footer-links {
      display: flex;
      gap: 20px;
    }

    .terminal-page .tp-footer-links a {
      color: var(--tp-text-muted);
      text-decoration: none;
      transition: color 0.2s;
    }

    .terminal-page .tp-footer-links a:hover {
      color: var(--tp-accent);
    }

    /* Mobile */
    @media (max-width: 600px) {
      .terminal-page .tp-container {
        padding: 0 16px;
      }

      .terminal-page .tp-logo-text {
        font-size: 28px;
      }

      .terminal-page .tp-terminal-body {
        min-height: 250px;
      }

      .terminal-page .tp-footer-content {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>

  <script define:vars={{ version: SITE_CONFIG.version }}>
    // Interactive Terminal Logic
    (function() {
      const page = document.querySelector('.terminal-page');
      const terminalBody = document.getElementById('terminal-body');
      const terminalOutput = document.getElementById('terminal-output');
      const terminalInput = document.getElementById('terminal-input');
      const themeBtns = document.querySelectorAll('.tp-theme-btn');

      // Command history
      let history = [];
      let historyIndex = -1;

      // Available commands
      const commands = {
        help: showHelp,
        h: showHelp,
        capabilities: () => showSection('capabilities'),
        cap: () => showSection('capabilities'),
        proof: () => showSection('proof'),
        p: () => showSection('proof'),
        install: () => showSection('install'),
        i: () => showSection('install'),
        stats: () => showSection('stats'),
        s: () => showSection('stats'),
        clear: clearTerminal,
        cls: clearTerminal,
        demo: runDemo,
        examples: runDemo,
        github: () => { window.open('https://github.com/wildcard/caro', '_blank'); addOutput('Opening GitHub...', 'info'); },
        home: () => { window.location.href = '/'; },
        exit: () => { window.location.href = '/'; },
        e: () => { window.location.href = '/'; },
        version: () => addOutput(`caro v${version}`, 'accent'),
        v: () => addOutput(`caro v${version}`, 'accent'),
      };

      // Initialize with welcome message
      showWelcome();

      // Focus input when clicking terminal
      document.getElementById('terminal').addEventListener('click', () => {
        terminalInput.focus();
      });

      // Handle input
      terminalInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const cmd = terminalInput.value.trim().toLowerCase();
          if (cmd) {
            processCommand(cmd);
            history.push(cmd);
            historyIndex = history.length;
          }
          terminalInput.value = '';
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          if (historyIndex > 0) {
            historyIndex--;
            terminalInput.value = history[historyIndex];
          }
        } else if (e.key === 'ArrowDown') {
          e.preventDefault();
          if (historyIndex < history.length - 1) {
            historyIndex++;
            terminalInput.value = history[historyIndex];
          } else {
            historyIndex = history.length;
            terminalInput.value = '';
          }
        }
      });

      // Theme switching
      themeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const theme = btn.dataset.theme;
          page.dataset.theme = theme;
          themeBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          localStorage.setItem('terminal-page-theme', theme);
        });
      });

      // Restore theme
      const savedTheme = localStorage.getItem('terminal-page-theme');
      if (savedTheme) {
        page.dataset.theme = savedTheme;
        themeBtns.forEach(btn => {
          btn.classList.toggle('active', btn.dataset.theme === savedTheme);
        });
      }

      // Copy buttons
      document.querySelectorAll('.tp-copy-btn').forEach(btn => {
        btn.addEventListener('click', async () => {
          const text = btn.dataset.copy;
          try {
            await navigator.clipboard.writeText(text);
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 2000);
          } catch (err) {
            console.error('Copy failed:', err);
          }
        });
      });

      function processCommand(cmd) {
        addOutput(cmd, 'cmd');

        // Check for caro command simulation
        if (cmd.startsWith('caro ')) {
          simulateCaroCommand(cmd);
          return;
        }

        const handler = commands[cmd];
        if (handler) {
          handler();
        } else {
          addOutput(`Command not found: ${cmd}. Type 'help' for available commands.`, 'error');
        }

        scrollToBottom();
      }

      function addOutput(text, className = '') {
        const line = document.createElement('div');
        line.className = 'tp-output-line' + (className ? ' tp-' + className : '');
        line.textContent = text;
        terminalOutput.appendChild(line);
        scrollToBottom();
      }

      function addHTML(html) {
        const container = document.createElement('div');
        container.innerHTML = html;
        terminalOutput.appendChild(container);
        scrollToBottom();
      }

      function scrollToBottom() {
        terminalBody.scrollTop = terminalBody.scrollHeight;
      }

      function clearTerminal() {
        terminalOutput.innerHTML = '';
      }

      function showWelcome() {
        addHTML(`
          <div class="tp-output-line tp-accent">
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó
‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë
‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù
 ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù </div>
        `);
        addOutput(`v${version} - Safe Shell Commands You Can Trust`, 'dim');
        addOutput('', '');
        addOutput("Type 'help' to see available commands", 'info');
        addOutput("Try: caro \"find all python files\"", 'dim');
      }

      function showHelp() {
        addHTML(`
          <div class="tp-help-box">
            <div class="tp-help-title">Available Commands</div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">help, h</span>
              <span class="tp-help-desc">Show this help menu</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">capabilities, cap</span>
              <span class="tp-help-desc">Discover what caro can do</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">proof, p</span>
              <span class="tp-help-desc">See safety validation in action</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">install, i</span>
              <span class="tp-help-desc">Installation instructions</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">stats, s</span>
              <span class="tp-help-desc">View project statistics</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">demo, examples</span>
              <span class="tp-help-desc">Run interactive demo</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">github</span>
              <span class="tp-help-desc">Open GitHub repository</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">home, exit, e</span>
              <span class="tp-help-desc">Go to main site</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">clear, cls</span>
              <span class="tp-help-desc">Clear terminal</span>
            </div>
            <div class="tp-help-item">
              <span class="tp-help-cmd">caro "..."</span>
              <span class="tp-help-desc">Try a sample command</span>
            </div>
          </div>
        `);
      }

      function showSection(sectionId) {
        const section = document.getElementById('section-' + sectionId);
        if (section) {
          // Hide all sections first
          document.querySelectorAll('.tp-section').forEach(s => s.style.display = 'none');
          // Show the requested section
          section.style.display = 'block';
          // Scroll to it
          section.scrollIntoView({ behavior: 'smooth' });
          addOutput(`Showing ${sectionId}...`, 'info');
        }
      }

      function runDemo() {
        addOutput('Running interactive demo...', 'info');
        addOutput('', '');

        const demos = [
          { prompt: 'find all PDF files larger than 10MB', result: 'find . -name "*.pdf" -type f -size +10M', safe: true },
          { prompt: 'delete everything in system root', result: 'rm -rf /', safe: false },
          { prompt: 'show disk usage sorted by size', result: 'du -sh */ | sort -rh | head -10', safe: true },
        ];

        let i = 0;
        function showNext() {
          if (i >= demos.length) return;

          const demo = demos[i];
          addOutput(`$ caro "${demo.prompt}"`, 'cmd');

          setTimeout(() => {
            addOutput(`üêï Caro: ${demo.result}`, 'result');
            if (demo.safe) {
              addOutput('‚úì Safe to run on your system', 'info');
            } else {
              addOutput('‚úï BLOCKED: Dangerous pattern detected', 'error');
            }
            addOutput('', '');
            i++;
            setTimeout(showNext, 1500);
          }, 500);
        }

        setTimeout(showNext, 500);
      }

      function simulateCaroCommand(cmd) {
        const prompt = cmd.replace(/^caro\s+["']?|["']?$/g, '');

        // Simulate some responses
        const responses = {
          'find all python files': { result: 'find . -name "*.py" -type f', safe: true },
          'find python files': { result: 'find . -name "*.py" -type f', safe: true },
          'list files': { result: 'ls -la', safe: true },
          'show disk usage': { result: 'df -h', safe: true },
          'delete everything': { result: 'rm -rf /', safe: false },
          'rm -rf': { result: 'rm -rf /', safe: false },
        };

        setTimeout(() => {
          // Find a matching response or generate a generic one
          let response = null;
          for (const [key, val] of Object.entries(responses)) {
            if (prompt.toLowerCase().includes(key)) {
              response = val;
              break;
            }
          }

          if (!response) {
            response = { result: `# Command for: ${prompt}`, safe: true };
          }

          addOutput(`üêï Caro: ${response.result}`, 'result');
          if (response.safe) {
            addOutput('‚úì Safe to run on your system', 'info');
          } else {
            addOutput('‚úï BLOCKED: Dangerous pattern detected', 'error');
          }
        }, 300);
      }
    })();
  </script>
</body>
</html>
